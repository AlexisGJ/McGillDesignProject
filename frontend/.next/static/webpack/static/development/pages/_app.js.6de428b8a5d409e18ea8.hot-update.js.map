{"version":3,"file":"static/webpack/static/development/pages/_app.js.6de428b8a5d409e18ea8.hot-update.js","sources":["webpack:///./pages/_app.js"],"sourcesContent":["import React from 'react'\nimport App, { Container } from 'next/app'\nimport Head from 'next/head'\nimport { Redirect, Route } from 'react-router-dom'\nimport GoogleLogin from 'react-google-login';\nrequire('dotenv').config()\n\nimport '../static/css/main_custom.css'\n\n\nexport default class MyApp extends App {\n  static async getInitialProps({ Component, ctx }) {\n    let pageProps = {}\n\n    if (Component.getInitialProps) {\n      pageProps = await Component.getInitialProps(ctx)\n    }\n\n    return { pageProps }\n  }\n\n  state = {\n    isLoggedIn: false,\n    status: \"\",\n  }\n\n  responseGoogle = (response) => {\n\n    console.log(response);\n    console.log(process.env.ALLOWED_EMAIL)\n\n    if (response.accessToken && response.profileObj && response.profileObj.email) {\n      if (response.profileObj.email == process.env.REACT_APP_ALLOWED_EMAIL) {\n        console.log(\"Connected !\")\n        this.setState({\n          isLoggedIn: true,\n          status: \"\",\n        });\n      } else {\n        this.setState({\n          status: \"Ce compte n'est pas autoris√©\",\n        })\n      }\n      \n    } else {\n      this.setState({\n        status: \"Erreur de connexion\",\n      })\n    }\n  }\n\n  render () {\n    const { Component, pageProps } = this.props\n\n    return (\n      <Container>\n        {this.state.isLoggedIn ? (\n          <Component {...pageProps} />\n        ) : (\n          <div className=\"loginPage\">\n            <h1>CAMP CAROWANIS</h1>\n            <div className=\"googleButton\">\n              <GoogleLogin\n                clientId=\"379738068740-tgguug359j7mqrm0vqledsf9si5u7ssp.apps.googleusercontent.com\"\n                buttonText=\"Connexion avec Google\"\n                onSuccess={this.responseGoogle}\n                onFailure={this.responseGoogle}\n                />\n            </div>\n            <div className=\"status\">{this.state.status}</div>\n          </div>\n        )}\n      </Container>\n    )\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;AAWA;AACA;AACA;AAFA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AADA;AAGA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;;;;;;;AA/DA;AACA;AACA;AACA;;;;;;AACA;AACA;;AADA;AACA;;AAEA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AATA;AACA;AADA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}