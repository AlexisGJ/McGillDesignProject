{"version":3,"file":"static/webpack/static/development/pages/index.js.40033a9f0feab545f03a.hot-update.js","sources":["webpack:///./components/TableComponent.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Paper from '@material-ui/core/Paper';\n\nimport {ResponsiveContainer, LineChart, Line, XAxis, YAxis} from 'recharts';\n\nimport ModalComponent from '../components/ModalComponent'\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    marginTop: theme.spacing.unit * 3,\n    overflowX: 'auto',\n  },\n  table: {\n    // minWidth: 700,\n  },\n  tableRow: {\n    cursor: 'pointer',\n    '&:hover': {\n      backgroundColor: theme.palette.grey[200],\n    },\n  },\n  tableSpan: {\n    fontSize: '0.6em',\n    fontColor: '#999',\n  },\n\n  value_normal: {\n    fontWeight: 'bold',\n  },\n  value_low: {\n    color: 'red',\n    fontWeight: 'bold',\n  },\n  value_high: {\n    color: 'red',\n    fontWeight: 'bold',\n  },\n\n  value_red: {\n    color: 'red',\n  },\n  value_black: {\n    color: 'black',\n  },\n\n  \n});\n\n\nfunction desc(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction stableSort(array, cmp) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = cmp(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(el => el[0]);\n}\n\nfunction getSorting(order, orderBy) {\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\n}\n\nconst rows = [\n  { id: 'name', numeric: false, disablePadding: false, label: 'Nom', enableSorting: true },\n  { id: 'historique', numeric: false, disablePadding: false, label: 'Tendance dernière heure', enableSorting: false },\n  { id: 'mmol', numeric: true, disablePadding: true, label: 'Niveau de glucose (mmol/L)', enableSorting: true },\n  { id: 'uploaderBattery', numeric: true, disablePadding: true, label: 'Batterie', enableSorting: true },\n  { id: 'dateFromNowMinutes', numeric: true, disablePadding: false, label: 'Dernière valeur', enableSorting: true },\n];\n\n\nclass EnhancedTableHead extends React.Component {\n  createSortHandler = property => event => {\n    this.props.onRequestSort(event, property);\n  };\n\n  render() {\n    const { order, orderBy } = this.props;\n\n    return (\n      <TableHead>\n        <TableRow>\n          {rows.map(\n            row => (\n              <TableCell\n                key={row.id}\n                align={row.id == 'name' ? 'left' : 'right'}\n                padding={row.disablePadding ? 'none' : 'default'}\n                sortDirection={orderBy === row.id ? order : false}\n              >\n              {row.enableSorting ? (\n                <Tooltip\n                  title=\"Sort\"\n                  placement={row.numeric ? 'bottom-end' : 'bottom-start'}\n                  enterDelay={300}\n                >\n                  <TableSortLabel\n                    active={orderBy === row.id}\n                    direction={order}\n                    onClick={this.createSortHandler(row.id)}\n                  >\n                    {row.label}\n                  </TableSortLabel>\n                </Tooltip>\n              ) : (\n                <TableSortLabel>\n                  {row.label}\n                </TableSortLabel>\n              )}\n              \n              </TableCell>\n            ),\n            this,\n          )}\n        </TableRow>\n      </TableHead>\n    );\n  }\n}\n\nEnhancedTableHead.propTypes = {\n  onRequestSort: PropTypes.func.isRequired,\n  order: PropTypes.string.isRequired,\n  orderBy: PropTypes.string.isRequired,\n};\n\n\n\nclass SimpleTable extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      // data: props.data,\n      open: false,\n      row: {name: \"\", sensor: \"\"},\n    };\n  }\n\n  \n\n  componentDidMount() {\n    this.setState({\n      // rows: this.props.data,\n      isLoaded: true\n    })\n  }\n\n  // componentWillReceiveProps() {\n  //   this.setState({\n  //     rows: this.props.data,\n  //     isLoaded: true\n  //   })\n  // }\n\n  handleClick = (row) => {\n    this.setState({open: true, row: row});\n  }\n\n  handleOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    const { classes, rows, order, orderBy } = this.props;\n    const { error, isLoaded } = this.state;\n\n    if (error) {\n        return <div>Error: {error.message}</div>;\n    } else if (!isLoaded || !rows) {\n        return <div>Loading...</div>;\n    } else {\n      return (\n        <Paper className={classes.root}>\n          <Table className={classes.table}>\n            <EnhancedTableHead\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={this.props.handleRequestSort}\n            />\n            <TableBody>\n              {rows.map(row => (\n                row.latestReading == \"err_no_data\" ? (\n                  <TableRow key={row._id} className={classes.tableRow} onClick={() => this.handleClick(row)}>\n                    <TableCell component=\"th\" scope=\"row\" padding=\"dense\">\n                      {row.name}\n                    </TableCell>\n                    <TableCell align=\"right\" padding=\"dense\">\n                    </TableCell>\n                    <TableCell align=\"right\" padding=\"dense\">N/A</TableCell>\n                    <TableCell align=\"right\" padding=\"dense\"></TableCell>\n                    <TableCell align=\"right\" padding=\"dense\">N/A</TableCell>\n                  </TableRow>\n                ) : (\n                  <TableRow key={row._id} className={classes.tableRow} onClick={() => this.handleClick(row)}>\n                    <TableCell component=\"th\" scope=\"row\" padding=\"dense\">\n                      {row.name}\n                    </TableCell>\n                    <TableCell align=\"right\" padding=\"dense\">\n                      <div style={{ width: '150px', height: '30px', }}>\n                        <ResponsiveContainer>\n                          <LineChart data={row.readingsLastHour}>\n                            <XAxis type=\"number\" dataKey=\"dateFromNowMinutes\" hide={true} />\n                            <YAxis type=\"number\" domain={['dataMin', 'dataMax']} hide={true} />\n                            <Line type='monotone' dataKey='mmol' stroke='#999' strokeWidth={2} dot={{ r: 0 }}/>\n                          </LineChart>\n                        </ResponsiveContainer>\n                      </div>\n                    </TableCell>\n                    <TableCell align=\"right\" padding=\"dense\" className={((row.latestReading.mmol < row.range_min) ? classes.value_low : ((row.latestReading.mmol > row.range_max) ? classes.value_high : classes.value_normal))}>\n                      {row.latestReading.mmol} <span style={{fontSize: '1.3em', marginTop: '-5px'}} dangerouslySetInnerHTML={{__html: row.latestReading.directionArrow}}></span>\n                    </TableCell>\n                    {row.battery ? (\n                      <TableCell align=\"right\" padding=\"dense\" className={(row.battery.uploaderBattery < 20) ? classes.value_red : classes.value_black}>{row.battery.uploaderBattery} %<br></br><span className={classes.tableSpan}>{row.battery.dateFromNow}</span></TableCell>\n                    ) : (\n                      <TableCell align=\"right\" padding=\"dense\"></TableCell>\n                    )}\n                    <TableCell align=\"right\" padding=\"dense\" className={(row.dateFromNowMinutes > 60) ? classes.value_red : classes.value_black}>{row.latestReading.dateTime}<br></br><span className={classes.tableSpan}>{row.latestReading.dateFromNow}</span></TableCell>\n                  </TableRow>\n                )\n                \n              ))}\n            </TableBody>\n          </Table>\n  \n          <ModalComponent open={this.state.open} handleOpen={this.handleOpen} handleClose={this.handleClose} data={this.state.row}/>\n        </Paper>\n      );\n    }\n\n  }\n}\n\nSimpleTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nconst SimpleTableWrapped = withStyles(styles)(SimpleTable);\n\nexport default SimpleTableWrapped;"],"mappings":"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","sourceRoot":""}